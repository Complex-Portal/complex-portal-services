# PDB Import

## Introduction

The QSProteome Import is a Java service used to process data from QSProteome and import xrefs into the Complex Portal database.

## How to run

Run the script [importQsProteomStructures.sh](importQsProteomStructures.sh) to process and import QSProteome xrefs into Complex Portal.

By default, this script won't actually make any modifications in the database, it will just generate reports with the
complexes that would be created and updated based on the input data.

To actually import data into the database, change property 'dry.run.mode' in the file
[pdb-import.properties](src/main/resources/META-INF/pdb-import.properties) to false.

### Input arguments

The scripts take the following 6 input arguments:
1. Maven profile
2. IntAct editor username
3. Directory to write report and output files
4. Separator used in the input and output files
5. Boolean to indicate if the input file has a header

## Process

The steps to process and import PDB assemblies xrefs are:
1. Iterate through all the complexes
   1. For each complex
      1. Call QSProteome API to find entries using the complex id
      2. Filter matches that are only an exist match between the QSProteome structure and the complex
   2. For each complex, based on the QSProteome structures found in the previous step:
      1. Structures without an xref would be reported as new xrefs to be created
      2. Existing xrefs for structures without the right qualifier would be reported for review
      3. Existing xrefs without a matching structure will be reported for deletion
   3. If not on dry-run mode, changes on the xrefs are saved to the database

## More technical details

For more technical details, check the [Complex Batch Import README](../complex-batch-import/README.md),
containing information about the process to import the xrefs, maven profile needed to run the script,
and output files generated by this service.
